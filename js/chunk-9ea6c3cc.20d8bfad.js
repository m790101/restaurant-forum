(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ea6c3cc"],{6135:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container py-5"},[e("AdminNav"),e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.users,(function(s){return e("tr",{key:s.id},[e("th",{attrs:{scope:"row"}},[t._v(" "+t._s(s.id)+" ")]),e("td",[t._v(t._s(s.name))]),e("td",[t.currentUser.id!==s.id?[t._v(" "+t._s(t._f("isAdminDisplay")(s.isAdmin))+" ")]:t._e()],2),e("td",[t.currentUser.id!==s.id?e("button",{directives:[{name:"show",rawName:"v-show",value:s.isAdmin,expression:"user.isAdmin"}],staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleUserRole(s.id,s.isAdmin)}}},[t._v(" set as user ")]):t._e(),t.currentUser.id!==s.id?e("button",{directives:[{name:"show",rawName:"v-show",value:!s.isAdmin,expression:"!user.isAdmin"}],staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleUserRole(s.id,s.isAdmin)}}},[t._v(" set as admin ")]):t._e()])])})),0)])],1)},a=[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v(" # ")]),e("th",{attrs:{scope:"col"}},[t._v(" Email ")]),e("th",{attrs:{scope:"col"}},[t._v(" Role ")]),e("th",{attrs:{scope:"col",width:"140"}},[t._v(" Action ")])])])}],n=s("be6c"),i=s("f9db"),o=s("2f62"),u={components:{AdminNav:i["a"]},data(){return{users:[]}},methods:{async fetchUsers(){try{const{data:t}=await n["a"].getAdminUsers();this.users=t.users}catch(t){console.log(t)}},async toggleUserRole(t,e){try{const s=!e,{data:r}=await n["a"].setAdmin({userId:t,isAdmin:s.toString()});console.log(r),this.users=this.users.map(e=>e.id===t?{...e,isAdmin:!e.isAdmin}:e)}catch(s){console.error(s)}}},created(){this.fetchUsers()},filters:{isAdminDisplay(t){return t?"admin":"user"}},computed:{...Object(o["b"])(["currentUser"])}},d=u,c=s("2877"),l=Object(c["a"])(d,r,a,!1,null,null,null);e["default"]=l.exports},be6c:function(t,e,s){"use strict";var r=s("2fa3");e["a"]={category:{get(){return r["b"].get("/admin/categories")},delete({categoryId:t}){return r["b"].delete("/admin/categories/"+t)},create({name:t}){return r["b"].post("/admin/categories",{name:t})},update({categoryId:t,name:e}){return r["b"].put("/admin/categories/"+t,{name:e})}},restaurants:{create({formData:t}){return r["b"].post("/admin/restaurants",t)},get(){return r["b"].get("/admin/restaurants")},delete({restaurantId:t}){return r["b"].delete("/admin/restaurants/"+t)},getDetail({restaurantId:t}){return r["b"].get("/admin/restaurants/"+t)},update({restaurantId:t,formData:e}){return r["b"].put("/admin/restaurants/"+t,e)}},getAdminUsers(){return r["b"].get("/admin/users")},setAdmin({userId:t,isAdmin:e}){return r["b"].put("/admin/users/"+t,{isAdmin:e})}}},f9db:function(t,e,s){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("h1",[t._v("餐廳後台")]),e("router-link",{attrs:{to:"/admin/restaurants"}},[t._v("Restaurants")]),t._v(" | "),e("router-link",{attrs:{to:"/admin/categories"}},[t._v("Categories")]),t._v(" | "),e("router-link",{attrs:{to:"/admin/users"}},[t._v("Users")])],1)},a=[],n=s("2877"),i={},o=Object(n["a"])(i,r,a,!1,null,null,null);e["a"]=o.exports}}]);
//# sourceMappingURL=chunk-9ea6c3cc.20d8bfad.js.map